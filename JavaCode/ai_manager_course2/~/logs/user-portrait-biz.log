2024-12-17 00:55:45 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 59454 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 00:55:45 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 00:55:45 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 00:55:46 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.155 seconds (JVM running for 1.38)
2024-12-17 00:56:00 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 00:56:00 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 00:56:00 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子(String), defaultModel(String), {}(String)
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 00:56:03 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 00:56:03 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 00:56:03 [http-nio-8081-exec-9] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 00:56:03 [http-nio-8081-exec-9] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:63) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	... 59 more
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子(String), defaultModel(String), {}(String)
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 2(Integer)
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 2(Integer)
2024-12-17 00:56:05 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 00:56:05 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 00:56:05 [http-nio-8081-exec-10] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 00:56:05 [http-nio-8081-exec-10] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:63) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	... 59 more
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子(String), defaultModel(String), {}(String)
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 3(Integer)
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 3(Integer)
2024-12-17 00:56:05 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 00:56:05 [http-nio-8081-exec-1] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 00:56:05 [http-nio-8081-exec-1] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 00:56:05 [http-nio-8081-exec-1] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:63) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	... 59 more
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子(String), defaultModel(String), {}(String)
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 4(Integer)
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 4(Integer)
2024-12-17 00:56:05 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 00:56:05 [http-nio-8081-exec-2] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 00:56:05 [http-nio-8081-exec-2] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 00:56:05 [http-nio-8081-exec-2] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:63) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	... 59 more
2024-12-17 00:56:07 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 00:56:07 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 00:56:07 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 4
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 00:56:09 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 4
2024-12-17 00:56:12 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 00:56:12 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 00:56:12 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 00:56:12 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 00:56:12 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 00:56:12 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 00:56:12 [http-nio-8081-exec-2] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 00:56:12 [http-nio-8081-exec-2] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$4.execute(ConversationController.java:92) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addChat(ConversationController.java:83) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 00:56:12 [http-nio-8081-exec-2] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:63) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$4.execute(ConversationController.java:92) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addChat(ConversationController.java:83) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:54) ~[classes/:?]
	... 59 more
2024-12-17 01:01:18 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 59871 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:01:18 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:01:18 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:01:19 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.231 seconds (JVM running for 1.837)
2024-12-17 01:01:42 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:01:42 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:01:42 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 0
2024-12-17 01:01:48 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:01:48 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:01:48 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: RAG是什么(String), defaultModel(String), {}(String)
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:01:56 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:01:56 [http-nio-8081-exec-3] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:01:56 [http-nio-8081-exec-3] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=RAG是什么}
2024-12-17 01:01:56 [http-nio-8081-exec-3] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:01:56 [http-nio-8081-exec-3] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败 (500 错误): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:73) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:60) ~[classes/:?]
	... 59 more
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: RAG是什么(String), defaultModel(String), {}(String)
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 2(Integer)
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 2(Integer)
2024-12-17 01:02:00 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:02:00 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:02:00 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=RAG是什么}
2024-12-17 01:02:00 [http-nio-8081-exec-4] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:02:00 [http-nio-8081-exec-4] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败 (500 错误): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:73) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:60) ~[classes/:?]
	... 59 more
2024-12-17 01:02:03 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:02:03 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:02:03 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 2
2024-12-17 01:07:26 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 60309 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:07:26 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:07:26 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:07:27 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.081 seconds (JVM running for 1.302)
2024-12-17 01:07:35 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 60324 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:07:35 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:07:35 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:07:36 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.221 seconds (JVM running for 1.766)
2024-12-17 01:07:41 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:07:41 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:07:41 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: RAG(String), defaultModel(String), {}(String)
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:07:45 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:07:45 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:07:45 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=RAG}
2024-12-17 01:07:45 [http-nio-8081-exec-10] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:07:45 [http-nio-8081-exec-10] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: RAG(String), defaultModel(String), {}(String)
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 2(Integer)
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 2(Integer)
2024-12-17 01:07:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:07:48 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:07:48 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=RAG}
2024-12-17 01:07:48 [http-nio-8081-exec-9] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:07:48 [http-nio-8081-exec-9] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:07:50 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:07:50 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:07:50 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 2
2024-12-17 01:09:50 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 60479 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:09:50 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:09:50 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:09:51 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.214 seconds (JVM running for 1.764)
2024-12-17 01:09:55 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:09:55 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:09:55 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 什么是ra g(String), defaultModel(String), {}(String)
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:10:02 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:10:02 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:10:02 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=什么是ra g}
2024-12-17 01:10:02 [http-nio-8081-exec-9] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:10:02 [http-nio-8081-exec-9] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:10:06 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:10:06 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:10:06 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:13:07 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 60707 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:13:07 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:13:07 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:13:08 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.049 seconds (JVM running for 1.275)
2024-12-17 01:13:12 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:13:12 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:13:12 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:13:12 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:13:12 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:13:12 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 噶 范德萨个(String), defaultModel(String), {}(String)
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:13:17 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:13:17 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:13:17 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=噶 范德萨个}
2024-12-17 01:13:17 [http-nio-8081-exec-10] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:13:17 [http-nio-8081-exec-10] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:13:20 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:13:20 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:13:20 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:13:21 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:13:21 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:13:21 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:13:28 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:13:28 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:13:28 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:17:29 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 61046 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:17:29 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:17:29 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:17:29 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.092 seconds (JVM running for 1.313)
2024-12-17 01:17:36 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 61059 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:17:36 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:17:36 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:17:37 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.228 seconds (JVM running for 1.779)
2024-12-17 01:17:47 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:17:47 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:17:47 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 电子科技大学(String), defaultModel(String), {}(String)
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:17:52 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:17:52 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:17:52 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=电子科技大学}
2024-12-17 01:17:52 [http-nio-8081-exec-9] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Object of type generator is not JSON serializable"
}

2024-12-17 01:17:52 [http-nio-8081-exec-9] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:17:54 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:17:54 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:17:54 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:23:06 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 61427 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:23:06 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:23:06 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:23:07 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.23 seconds (JVM running for 1.776)
2024-12-17 01:23:20 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:23:20 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:23:20 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 发疯喝酒啊说的话(String), defaultModel(String), {}(String)
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:23:24 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:23:24 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:23:24 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=发疯喝酒啊说的话}
2024-12-17 01:23:24 [http-nio-8081-exec-9] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Exception: process_query returned an unserializable type."
}

2024-12-17 01:23:24 [http-nio-8081-exec-9] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:23:27 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:23:27 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:23:27 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:23:28 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:23:31 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:23:31 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:23:31 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:23:31 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:23:31 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:23:31 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:23:31 [http-nio-8081-exec-3] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:23:31 [http-nio-8081-exec-3] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=发疯的啦}
2024-12-17 01:23:31 [http-nio-8081-exec-3] ERROR org.uestc.weglas.core.service.ChatServiceImpl - Python 服务返回 500 错误，响应内容: {
  "error": "Exception: process_query returned an unserializable type."
}

2024-12-17 01:23:31 [http-nio-8081-exec-3] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: Python 服务异常 (500): 500 INTERNAL SERVER ERROR
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:59) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$4.execute(ConversationController.java:92) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addChat(ConversationController.java:83) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpServerErrorException$InternalServerError: 500 INTERNAL SERVER ERROR
	at org.springframework.web.client.HttpServerErrorException.create(HttpServerErrorException.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:27:38 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 61733 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:27:38 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:27:38 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:27:39 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.239 seconds (JVM running for 1.789)
2024-12-17 01:27:56 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:27:56 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:27:56 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 0
2024-12-17 01:27:56 [http-nio-8081-exec-1] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.NullPointerException: null
	at org.uestc.weglas.core.converter.ConversationConverter.convert(ConversationConverter.java:36) ~[classes/:?]
	at org.uestc.weglas.core.service.ConversationServiceImpl.queryById(ConversationServiceImpl.java:45) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:206) ~[spring-aop-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at com.sun.proxy.$Proxy89.queryById(Unknown Source) ~[?:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:113) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$4.execute(ConversationController.java:92) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addChat(ConversationController.java:83) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:28:07 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:28:07 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:28:07 [http-nio-8081-exec-2] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 0
2024-12-17 01:28:12 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:28:12 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:28:12 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 发疯就是快乐放假啊(String), defaultModel(String), {}(String)
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:28:16 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:28:16 [http-nio-8081-exec-8] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:28:16 [http-nio-8081-exec-8] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=发疯就是快乐放假啊}
2024-12-17 01:28:19 [http-nio-8081-exec-8] INFO  org.uestc.weglas.core.service.ChatServiceImpl - Python 服务响应状态码: 200
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), user(String), TEXT(String), 发疯就是快乐放假啊(String), {}(String)
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), assistant(String), TEXT(String), 看起来您的查询可能有些不太清晰。如果您有关于发货时间、退换货政策、订单更改、支付方式或下单流程的具体问题，我可以为您提供更详细的信息。请问您需要了解哪方面的内容呢？或者，如果您有其他问题，也请随时告诉我！(String), {}(String)
2024-12-17 01:28:19 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 2
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:28:19 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:28:32 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:28:32 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:28:32 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:28:32 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:28:32 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:28:32 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 2
2024-12-17 01:28:32 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:28:32 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[发疯就是快乐放假啊, 看起来您的查询可能有些不太清晰。如果您有关于发货时间、退换货政策、订单更改、支付方式或下单流程的具体问题，我可以为您提供更详细的信息。请问您需要了解哪方面的内容呢？或者，如果您有其他问题，也请随时告诉我！], message=鞋子尺码}
2024-12-17 01:28:41 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - Python 服务响应状态码: 200
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), user(String), TEXT(String), 鞋子尺码(String), {}(String)
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), assistant(String), TEXT(String), 看来您对鞋子的尺码选择有所疑问。根据提供的信息，这里有一些建议帮助您选择合适的尺码：

1. **参考尺码表**：最准确的方法是参照具体品牌的尺码表。不同品牌和款式可能会有不同的尺码标准，因此建议在购买前仔细查看该品牌的尺码指南。

2. **测量脚长**：使用一把直尺或卷尺测量您的脚长，从脚跟最突出的部分量到大脚趾尖端。确保在下午或晚上测量，因为此时双脚会稍微膨胀，测量结果更接近实际穿着时的状态。

3. **儿童与成人尺码范围**：
   - 儿童款尺码范围为30-36。
   - 成人款尺码范围为36-48。

4. **试穿**：如果条件允许，最好能亲自试穿。穿上平时常穿的袜子，走几步，确保鞋子既不太紧也不太松，脚趾前方应留有适当空间（大约一个拇指的宽度）。

5. **考虑用途**：不同的鞋款设计适合不同的活动，例如跑步鞋、篮球鞋等，选择时也要考虑到鞋子的用途，以获得最佳的舒适度和性能。

希望这些建议能帮助您找到合适的尺码！如果有更多问题或需要进一步的帮助，请随时告知。(String), {}(String)
2024-12-17 01:28:41 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:28:52 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:28:52 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:28:52 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:28:52 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:28:52 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:28:52 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 4
2024-12-17 01:28:52 [http-nio-8081-exec-5] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:28:52 [http-nio-8081-exec-5] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[发疯就是快乐放假啊, 看起来您的查询可能有些不太清晰。如果您有关于发货时间、退换货政策、订单更改、支付方式或下单流程的具体问题，我可以为您提供更详细的信息。请问您需要了解哪方面的内容呢？或者，如果您有其他问题，也请随时告诉我！, 鞋子尺码, 看来您对鞋子的尺码选择有所疑问。根据提供的信息，这里有一些建议帮助您选择合适的尺码：

1. **参考尺码表**：最准确的方法是参照具体品牌的尺码表。不同品牌和款式可能会有不同的尺码标准，因此建议在购买前仔细查看该品牌的尺码指南。

2. **测量脚长**：使用一把直尺或卷尺测量您的脚长，从脚跟最突出的部分量到大脚趾尖端。确保在下午或晚上测量，因为此时双脚会稍微膨胀，测量结果更接近实际穿着时的状态。

3. **儿童与成人尺码范围**：
   - 儿童款尺码范围为30-36。
   - 成人款尺码范围为36-48。

4. **试穿**：如果条件允许，最好能亲自试穿。穿上平时常穿的袜子，走几步，确保鞋子既不太紧也不太松，脚趾前方应留有适当空间（大约一个拇指的宽度）。

5. **考虑用途**：不同的鞋款设计适合不同的活动，例如跑步鞋、篮球鞋等，选择时也要考虑到鞋子的用途，以获得最佳的舒适度和性能。

希望这些建议能帮助您找到合适的尺码！如果有更多问题或需要进一步的帮助，请随时告知。], message=就聊到这里}
2024-12-17 01:28:55 [http-nio-8081-exec-5] INFO  org.uestc.weglas.core.service.ChatServiceImpl - Python 服务响应状态码: 200
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), user(String), TEXT(String), 就聊到这里(String), {}(String)
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), assistant(String), TEXT(String), 好的，如果您之后有任何其他问题或需要进一步的帮助，无论是关于鞋子尺码的选择还是其他任何话题，都欢迎随时联系我。祝您有个愉快的一天！(String), {}(String)
2024-12-17 01:28:55 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 6
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:29:41 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 6
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:29:45 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:29:49 [http-nio-8081-exec-7] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:29:49 [http-nio-8081-exec-7] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:29:49 [http-nio-8081-exec-7] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 6
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:29:51 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 6
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:29:57 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:41:03 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 62597 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:41:03 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:41:03 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:41:04 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.248 seconds (JVM running for 1.805)
2024-12-17 01:42:28 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:42:28 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:42:28 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 0
2024-12-17 01:42:29 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:42:29 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:42:29 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:42:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:42:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子品牌(String), defaultModel(String), {}(String)
2024-12-17 01:42:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:42:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:42:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:42:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:42:45 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:42:45 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:42:45 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:42:45 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:42:45 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子品牌}
2024-12-17 01:42:49 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - Python 服务响应状态码: 200
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), user(String), TEXT(String), 鞋子品牌(String), {}(String)
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), assistant(String), TEXT(String), 我们提供的鞋子品牌包括Adidas、Nike、Puma、Reebok、New Balance、Asics、Under Armour等运动品牌，以及Converse、Vans等休闲品牌。此外，还有Gucci、Balenciaga等高端品牌的鞋款。这些品牌覆盖了从日常休闲到专业运动的不同需求。如果您对某个特定品牌感兴趣，可以告诉我，我会为您提供更多详细信息。(String), {}(String)
2024-12-17 01:42:49 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 2
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:42:49 [http-nio-8081-exec-5] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
2024-12-17 01:46:39 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63006 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:46:39 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:46:39 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:52:05 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63395 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:52:05 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:52:05 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:52:06 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.136 seconds (JVM running for 1.356)
2024-12-17 01:52:31 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63433 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:52:31 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:52:31 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:52:32 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.232 seconds (JVM running for 1.774)
2024-12-17 01:53:34 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:53:34 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:53:34 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:54:20 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63548 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:54:20 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:54:20 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:54:21 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.079 seconds (JVM running for 1.302)
2024-12-17 01:54:25 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:54:25 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:54:25 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子怎么选(String), defaultModel(String), {}(String)
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:54:30 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:54:30 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8081/chat
2024-12-17 01:54:30 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子怎么选}
2024-12-17 01:54:30 [http-nio-8081-exec-9] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:54:30 [http-nio-8081-exec-9] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 404 null
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子怎么选(String), defaultModel(String), {}(String)
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 2(Integer)
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 2(Integer)
2024-12-17 01:54:40 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:54:40 [http-nio-8081-exec-3] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8081/chat
2024-12-17 01:54:40 [http-nio-8081-exec-3] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子怎么选}
2024-12-17 01:54:40 [http-nio-8081-exec-3] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:54:40 [http-nio-8081-exec-3] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 404 null
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子怎么选(String), defaultModel(String), {}(String)
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 3(Integer)
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 3(Integer)
2024-12-17 01:54:44 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:54:44 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8081/chat
2024-12-17 01:54:44 [http-nio-8081-exec-4] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子怎么选}
2024-12-17 01:54:44 [http-nio-8081-exec-4] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:54:44 [http-nio-8081-exec-4] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 404 null
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子怎么选(String), defaultModel(String), {}(String)
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 4(Integer)
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 4(Integer)
2024-12-17 01:54:51 [http-nio-8081-exec-6] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:54:51 [http-nio-8081-exec-6] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8081/chat
2024-12-17 01:54:51 [http-nio-8081-exec-6] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子怎么选}
2024-12-17 01:54:51 [http-nio-8081-exec-6] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:54:51 [http-nio-8081-exec-6] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 404 null
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子怎么选(String), defaultModel(String), {}(String)
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 5(Integer)
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 5(Integer)
2024-12-17 01:54:52 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:54:52 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8081/chat
2024-12-17 01:54:52 [http-nio-8081-exec-10] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子怎么选}
2024-12-17 01:54:52 [http-nio-8081-exec-10] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:54:52 [http-nio-8081-exec-10] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 404 null
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子怎么选(String), defaultModel(String), {}(String)
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 6(Integer)
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 6(Integer)
2024-12-17 01:54:52 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:54:52 [http-nio-8081-exec-1] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8081/chat
2024-12-17 01:54:52 [http-nio-8081-exec-1] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子怎么选}
2024-12-17 01:54:52 [http-nio-8081-exec-1] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
2024-12-17 01:54:52 [http-nio-8081-exec-1] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: 404 null
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.HttpClientErrorException$NotFound: 404 null
	at org.springframework.web.client.HttpClientErrorException.create(HttpClientErrorException.java:85) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:97) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:79) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.ResponseErrorHandler.handleError(ResponseErrorHandler.java:63) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:777) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:54:55 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:54:55 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:54:55 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 6
2024-12-17 01:55:59 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63690 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:55:59 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:55:59 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:56:00 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.087 seconds (JVM running for 1.306)
2024-12-17 01:56:08 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:56:08 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:56:08 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 0
2024-12-17 01:56:17 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:56:17 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:56:17 [http-nio-8081-exec-3] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 0
2024-12-17 01:56:18 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:56:18 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:56:18 [http-nio-8081-exec-4] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子推荐(String), defaultModel(String), {}(String)
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:56:24 [http-nio-8081-exec-8] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:56:24 [http-nio-8081-exec-8] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:56:24 [http-nio-8081-exec-8] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子推荐}
2024-12-17 01:56:34 [http-nio-8081-exec-8] ERROR org.uestc.weglas.core.service.ChatServiceImpl - 调用聊天接口失败：
org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8080/chat": Read timed out; nested exception is java.net.SocketTimeoutException: Read timed out
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:743) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method) ~[?:1.8.0_431]
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116) ~[?:1.8.0_431]
	at java.net.SocketInputStream.read(SocketInputStream.java:171) ~[?:1.8.0_431]
	at java.net.SocketInputStream.read(SocketInputStream.java:141) ~[?:1.8.0_431]
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246) ~[?:1.8.0_431]
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286) ~[?:1.8.0_431]
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345) ~[?:1.8.0_431]
	at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:779) ~[?:1.8.0_431]
	at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:714) ~[?:1.8.0_431]
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1644) ~[?:1.8.0_431]
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1549) ~[?:1.8.0_431]
	at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480) ~[?:1.8.0_431]
	at org.springframework.http.client.SimpleClientHttpResponse.getRawStatusCode(SimpleClientHttpResponse.java:55) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:51) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:765) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	... 62 more
2024-12-17 01:56:34 [http-nio-8081-exec-8] ERROR org.uestc.weglas.util.template.BizCallback - RuntimeException
java.lang.RuntimeException: 调用聊天接口失败: I/O error on POST request for "http://localhost:8080/chat": Read timed out; nested exception is java.net.SocketTimeoutException: Read timed out
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:62) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.doChat(ConversationController.java:115) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.access$100(ConversationController.java:26) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController$3.execute(ConversationController.java:73) ~[classes/:?]
	at org.uestc.weglas.util.template.BizTemplate.execute(BizTemplate.java:71) ~[classes/:?]
	at org.uestc.weglas.controller.ConversationController.addConversation(ConversationController.java:61) ~[classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_431]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_431]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_431]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_431]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:215) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:142) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:998) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:901) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:875) ~[spring-webmvc-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:199) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:770) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_431]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_431]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.12.jar:9.0.12]
	at java.lang.Thread.run(Thread.java:750) ~[?:1.8.0_431]
Caused by: org.springframework.web.client.ResourceAccessException: I/O error on POST request for "http://localhost:8080/chat": Read timed out; nested exception is java.net.SocketTimeoutException: Read timed out
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:743) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
Caused by: java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method) ~[?:1.8.0_431]
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116) ~[?:1.8.0_431]
	at java.net.SocketInputStream.read(SocketInputStream.java:171) ~[?:1.8.0_431]
	at java.net.SocketInputStream.read(SocketInputStream.java:141) ~[?:1.8.0_431]
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246) ~[?:1.8.0_431]
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286) ~[?:1.8.0_431]
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345) ~[?:1.8.0_431]
	at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:779) ~[?:1.8.0_431]
	at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:714) ~[?:1.8.0_431]
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1644) ~[?:1.8.0_431]
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1549) ~[?:1.8.0_431]
	at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480) ~[?:1.8.0_431]
	at org.springframework.http.client.SimpleClientHttpResponse.getRawStatusCode(SimpleClientHttpResponse.java:55) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.DefaultResponseErrorHandler.hasError(DefaultResponseErrorHandler.java:51) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:765) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:735) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:669) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.springframework.web.client.RestTemplate.postForEntity(RestTemplate.java:444) ~[spring-web-5.1.2.RELEASE.jar:5.1.2.RELEASE]
	at org.uestc.weglas.core.service.ChatServiceImpl.chat(ChatServiceImpl.java:51) ~[classes/:?]
	... 59 more
2024-12-17 01:59:07 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63933 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:59:07 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:59:07 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:59:08 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.081 seconds (JVM running for 1.301)
2024-12-17 01:59:30 [main] INFO  org.uestc.weglas.AiManageApplication - Starting AiManageApplication on CzyMacbookPro with PID 63993 (/Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2/target/classes started by caozhengyang in /Users/caozhengyang/Desktop/Full_Stack_LLM_Project/JavaCode/ai_manager_course2)
2024-12-17 01:59:30 [main] DEBUG org.uestc.weglas.AiManageApplication - Running with Spring Boot v2.1.0.RELEASE, Spring v5.1.2.RELEASE
2024-12-17 01:59:30 [main] INFO  org.uestc.weglas.AiManageApplication - No active profile set, falling back to default profiles: default
2024-12-17 01:59:31 [main] INFO  org.uestc.weglas.AiManageApplication - Started AiManageApplication in 1.093 seconds (JVM running for 1.309)
2024-12-17 01:59:39 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:59:39 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:59:39 [http-nio-8081-exec-1] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 0
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation` (`title`, `llm_model`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - ==> Parameters: 鞋子品牌(String), defaultModel(String), {}(String)
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.insert - <==    Updates: 1
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:59:43 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 0
2024-12-17 01:59:43 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 向 Python 服务发送普通聊天请求: http://localhost:8080/chat
2024-12-17 01:59:43 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - 请求体: {historyMessages=[], message=鞋子品牌}
2024-12-17 01:59:48 [http-nio-8081-exec-9] INFO  org.uestc.weglas.core.service.ChatServiceImpl - Python 服务响应状态码: 200
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), user(String), TEXT(String), 鞋子品牌(String), {}(String)
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==>  Preparing: UPDATE `ai_conversation` SET `gmt_modified` = CURRENT_TIMESTAMP() WHERE `id` = ? 
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - ==> Parameters: 1(Integer)
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.updateGmtModifiedById - <==    Updates: 1
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==>  Preparing: INSERT INTO `ai_conversation_chat_detail` (`conversation_id`, `role`, `type`,`content`, `ext`, `gmt_create`, `gmt_modified`) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP(), CURRENT_TIMESTAMP()) 
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - ==> Parameters: 1(Integer), assistant(String), TEXT(String), 根据您的查询，我们提供的鞋子品牌包括：

- Adidas
- Nike
- Puma
- Reebok
- New Balance
- Asics
- Under Armour

此外，还有休闲品牌如：
- Converse
- Vans

以及高端品牌如：
- Gucci
- Balenciaga

这些品牌涵盖了从日常休闲到专业运动的不同需求。如果您对某个特定品牌感兴趣或需要更多信息，请告诉我！(String), {}(String)
2024-12-17 01:59:48 [http-nio-8081-exec-9] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.insert - <==    Updates: 1
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==>  Preparing: SELECT * FROM ai_conversation WHERE id = ? 
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - ==> Parameters: 1(Integer)
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectById - <==      Total: 1
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==>  Preparing: SELECT * FROM ai_conversation_chat_detail WHERE conversation_id = ? order by gmt_create 
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - ==> Parameters: 1(Integer)
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationChatDetailMapper.selectByConversationId - <==      Total: 2
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==>  Preparing: SELECT * FROM ai_conversation order by gmt_modified DESC 
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - ==> Parameters: 
2024-12-17 01:59:48 [http-nio-8081-exec-10] DEBUG org.uestc.weglas.base.mapper.ConversationMapper.selectAll - <==      Total: 1
